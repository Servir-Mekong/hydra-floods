
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.8">
    
    
      
        <title>floods module - HYDRAFloods Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.644de097.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#hydrafloods.floods" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="HYDRAFloods Documentation" class="md-header__button md-logo" aria-label="HYDRAFloods Documentation" data-md-component="logo">
      
  <img src="../img/hydrafloods_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HYDRAFloods Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              floods module
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="HYDRAFloods Documentation" class="md-nav__button md-logo" aria-label="HYDRAFloods Documentation" data-md-component="logo">
      
  <img src="../img/hydrafloods_logo.png" alt="logo">

    </a>
    HYDRAFloods Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../using-datasets/" class="md-nav__link">
        Using the Dataset class
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/" class="md-nav__link">
        Algorithms
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../workflow-example/" class="md-nav__link">
        Workflow Example
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        Command Line Interface
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../corrections/" class="md-nav__link">
        corrections module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../datasets/" class="md-nav__link">
        datasets module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../depths/" class="md-nav__link">
        depths module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../decorators/" class="md-nav__link">
        decorators module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fetch/" class="md-nav__link">
        fetch module
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          floods module
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        floods module
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hydrafloods.floods" class="md-nav__link">
    floods
  </a>
  
    <nav class="md-nav" aria-label="floods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hydrafloods.floods.discrete_difference" class="md-nav__link">
    discrete_difference()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hydrafloods.floods.extract_flood" class="md-nav__link">
    extract_flood()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hydrafloods.floods.lar_change_detection" class="md-nav__link">
    lar_change_detection()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../filtering/" class="md-nav__link">
        filtering module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fuzzy/" class="md-nav__link">
        fuzzy module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../geeutils/" class="md-nav__link">
        geeutils module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../indices/" class="md-nav__link">
        indices module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ml/" class="md-nav__link">
        ml module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../thresholding/" class="md-nav__link">
        thresholding module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../timeseries/" class="md-nav__link">
        timeseries module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        utils module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dswfp/" class="md-nav__link">
        workflows.dswfp module
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hydrafloods.floods" class="md-nav__link">
    floods
  </a>
  
    <nav class="md-nav" aria-label="floods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hydrafloods.floods.discrete_difference" class="md-nav__link">
    discrete_difference()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hydrafloods.floods.extract_flood" class="md-nav__link">
    extract_flood()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hydrafloods.floods.lar_change_detection" class="md-nav__link">
    lar_change_detection()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


  <h1>floods module</h1>

<div class="doc doc-object doc-module">



<h2 class="doc doc-heading" id="hydrafloods.floods">
        <code>hydrafloods.floods</code>



</h2>

    <div class="doc doc-contents first">




  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h3 class="doc doc-heading" id="hydrafloods.floods.discrete_difference">
<code class="codehilite language-python"><span class="n">discrete_difference</span><span class="p">(</span><span class="n">observation</span><span class="p">,</span> <span class="n">reference</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Function to find the difference between an observation and reference dataset.
The data should be discrete values (i.e. a classification). This function
expects that water/floods = 1 and land = 0. Unknown values should be masked.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>observation</code></td>
        <td><code>ee.Image</code></td>
        <td><p>image object representing the observation of water to extract floods</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>reference</code></td>
        <td><code>ee.Image</code></td>
        <td><p>image object representing reference/permanent water to extract floods from</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.Image</code></td>
      <td><p>extracted flood image where flood values = 1</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>hydrafloods/floods.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="nd">@decorators</span><span class="o">.</span><span class="n">keep_attrs</span>
<span class="k">def</span> <span class="nf">discrete_difference</span><span class="p">(</span><span class="n">observation</span><span class="p">,</span> <span class="n">reference</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function to find the difference between an observation and reference dataset.</span>
<span class="sd">    The data should be discrete values (i.e. a classification). This function</span>
<span class="sd">    expects that water/floods = 1 and land = 0. Unknown values should be masked.</span>

<span class="sd">    args:</span>
<span class="sd">        observation (ee.Image): image object representing the observation of water to extract floods</span>
<span class="sd">        reference (ee.Image): image object representing reference/permanent water to extract floods from</span>

<span class="sd">    returns:</span>
<span class="sd">        ee.Image: extracted flood image where flood values = 1</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">og_mask</span> <span class="o">=</span> <span class="n">observation</span><span class="o">.</span><span class="n">mask</span><span class="p">()</span>
    <span class="n">floods</span> <span class="o">=</span> <span class="n">observation</span><span class="o">.</span><span class="n">unmask</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">reference</span><span class="o">.</span><span class="n">unmask</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">floods</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span><span class="n">og_mask</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">&quot;flood&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 class="doc doc-heading" id="hydrafloods.floods.extract_flood">
<code class="codehilite language-python"><span class="n">extract_flood</span><span class="p">(</span><span class="n">observation</span><span class="p">,</span> <span class="n">reference</span><span class="o">=</span><span class="s1">&#39;seasonal&#39;</span><span class="p">,</span> <span class="n">permanent_threshold</span><span class="o">=</span><span class="mi">75</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Function used to extract flooded area based off of different JRC datasets.
Expects that the water image has water = 1, land = 0, unknown = mask</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>observation</code></td>
        <td><code>ee.Image</code></td>
        <td><p>image object representing the observation of water to extract floods</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>reference</code></td>
        <td><code>str</code></td>
        <td><p>string to define how permanent water is defined. 'yearly' means use past 5 years
of JRC yearly data and extract permanent class. 'seasonal' means use monthly water occurrence
for the month of observation. 'occurrence' means use full JRC occurrence dataset irregardless of
time. default = seasonal</p></td>
        <td><code>&#39;seasonal&#39;</code></td>
      </tr>
      <tr>
        <td><code>permanent_threshold</code></td>
        <td><code>int</code></td>
        <td><p>threshold value in % to define permanent water. Only used when
reference equals 'seasonal' or 'occurrence'. default = 75</p></td>
        <td><code>75</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.Image</code></td>
      <td><p>the extracted flood image where floods = 1</p></td>
    </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>NotImplementedError</code></td>
        <td><p>when user provides an invalid option for reference parameter</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>hydrafloods/floods.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="nd">@decorators</span><span class="o">.</span><span class="n">keep_attrs</span>
<span class="k">def</span> <span class="nf">extract_flood</span><span class="p">(</span><span class="n">observation</span><span class="p">,</span> <span class="n">reference</span><span class="o">=</span><span class="s2">&quot;seasonal&quot;</span><span class="p">,</span> <span class="n">permanent_threshold</span><span class="o">=</span><span class="mi">75</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Function used to extract flooded area based off of different JRC datasets.</span>
<span class="sd">    Expects that the water image has water = 1, land = 0, unknown = mask</span>

<span class="sd">    args:</span>
<span class="sd">        observation (ee.Image): image object representing the observation of water to extract floods</span>
<span class="sd">        reference (str): string to define how permanent water is defined. &#39;yearly&#39; means use past 5 years</span>
<span class="sd">            of JRC yearly data and extract permanent class. &#39;seasonal&#39; means use monthly water occurrence</span>
<span class="sd">            for the month of observation. &#39;occurrence&#39; means use full JRC occurrence dataset irregardless of</span>
<span class="sd">            time. default = seasonal</span>
<span class="sd">        permanent_threshold (int): threshold value in % to define permanent water. Only used when</span>
<span class="sd">            reference equals &#39;seasonal&#39; or &#39;occurrence&#39;. default = 75</span>

<span class="sd">    returns:</span>
<span class="sd">        ee.Image: the extracted flood image where floods = 1</span>

<span class="sd">    raises:</span>
<span class="sd">        NotImplementedError: when user provides an invalid option for reference parameter</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">reference</span> <span class="o">==</span> <span class="s2">&quot;yearly&quot;</span><span class="p">:</span>
        <span class="n">end_time</span> <span class="o">=</span> <span class="n">observation</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
        <span class="n">permanent_water</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span>
                <span class="s2">&quot;JRC/GSW1_2/YearlyHistory&quot;</span>
            <span class="p">)</span>  <span class="c1"># get the JRC historical dataset</span>
            <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span>
                <span class="s2">&quot;1985-01-01&quot;</span><span class="p">,</span> <span class="n">end_time</span>
            <span class="p">)</span>  <span class="c1"># filter for historical data up to date of interest</span>
            <span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;system:time_start&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>  <span class="c1"># grab the 5 latest images</span>
            <span class="o">.</span><span class="n">map</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;waterClass&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="p">)</span>  <span class="c1"># extract out the permanent water class</span>
            <span class="o">.</span><span class="n">sum</span><span class="p">()</span>  <span class="c1"># check if a pixel has been classified as permanent water in the past 5 years</span>
            <span class="o">.</span><span class="n">unmask</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">elif</span> <span class="n">reference</span> <span class="o">==</span> <span class="s2">&quot;seasonal&quot;</span><span class="p">:</span>
        <span class="n">month</span> <span class="o">=</span> <span class="n">observation</span><span class="o">.</span><span class="n">date</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;month&quot;</span><span class="p">)</span>
        <span class="n">permanent_water</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s2">&quot;JRC/GSW1_3/MonthlyRecurrence&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;monthly_recurrence&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Filter</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="s2">&quot;month&quot;</span><span class="p">,</span> <span class="n">month</span><span class="p">))</span>
            <span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="n">permanent_threshold</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">elif</span> <span class="n">reference</span> <span class="o">==</span> <span class="s2">&quot;occurrence&quot;</span><span class="p">:</span>
        <span class="n">permanent_water</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;JRC/GSW1_3/GlobalSurfaceWater&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;occurrence&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="n">permanent_threshold</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s2">&quot;the selected reference method, </span><span class="si">{reference}</span><span class="s2">, is not implemeted. please select either &#39;yearly&#39;,&#39;seasonal&#39;, or &#39;occurrence&#39;&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">discrete_difference</span><span class="p">(</span><span class="n">observation</span><span class="p">,</span> <span class="n">permanent_water</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-function">



<h3 class="doc doc-heading" id="hydrafloods.floods.lar_change_detection">
<code class="codehilite language-python"><span class="n">lar_change_detection</span><span class="p">(</span><span class="n">observation</span><span class="p">,</span> <span class="n">reference</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_units</span><span class="o">=</span><span class="s1">&#39;dB&#39;</span><span class="p">,</span> <span class="n">segmentation</span><span class="o">=</span><span class="s1">&#39;edgeotsu&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Log Amplitude Ratio change detection method. https://doi.org/10.1080/014311698215649
Note: This method only works for SAR imagery.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>observation</code></td>
        <td><code>ee.Image</code></td>
        <td></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>reference</code></td>
        <td><code>ee.Image</code></td>
        <td></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>band</code></td>
        <td><code>str | None,optional</code></td>
        <td><p>band name to use for thresholding, if set to <code>None</code> will use first band in image. default = None</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>in_units</code></td>
        <td><code>str</code></td>
        <td><p>string specifying the input units for the imagery. Options are 'dB' or 'power'. If in_units = 'dB',
then the data is converted to power units. default = dB</p></td>
        <td><code>&#39;dB&#39;</code></td>
      </tr>
      <tr>
        <td><code>segmentation</code></td>
        <td><code>str | None</code></td>
        <td><p>segmentation method to use to . Options are 'edgeotsu', 'bmaxotsu', or None. If none
is provided then no segmentation is applied and the raw log amplitude ratio is returned. default = edgeotsu</p></td>
        <td><code>&#39;edgeotsu&#39;</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>optional keywords to pass to segmentation method, not required if segmentation = None</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ee.Image</code></td>
      <td></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>hydrafloods/floods.py</code></summary>
          <div class="codehilite"><pre><span></span><code><span class="nd">@decorators</span><span class="o">.</span><span class="n">keep_attrs</span>
<span class="k">def</span> <span class="nf">lar_change_detection</span><span class="p">(</span>
    <span class="n">observation</span><span class="p">,</span> <span class="n">reference</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_units</span><span class="o">=</span><span class="s2">&quot;dB&quot;</span><span class="p">,</span> <span class="n">segmentation</span><span class="o">=</span><span class="s2">&quot;edgeotsu&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Log Amplitude Ratio change detection method. https://doi.org/10.1080/014311698215649</span>
<span class="sd">    Note: This method only works for SAR imagery.</span>

<span class="sd">    args:</span>
<span class="sd">        observation (ee.Image):</span>
<span class="sd">        reference (ee.Image):</span>
<span class="sd">        band (str | None,optional): band name to use for thresholding, if set to `None` will use first band in image. default = None</span>
<span class="sd">        in_units (str, optional): string specifying the input units for the imagery. Options are &#39;dB&#39; or &#39;power&#39;. If in_units = &#39;dB&#39;,</span>
<span class="sd">            then the data is converted to power units. default = dB</span>
<span class="sd">        segmentation (str | None, optional): segmentation method to use to . Options are &#39;edgeotsu&#39;, &#39;bmaxotsu&#39;, or None. If none</span>
<span class="sd">            is provided then no segmentation is applied and the raw log amplitude ratio is returned. default = edgeotsu</span>
<span class="sd">        **kwargs: optional keywords to pass to segmentation method, not required if segmentation = None</span>


<span class="sd">    returns:</span>
<span class="sd">        ee.Image:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">band</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">band</span> <span class="o">=</span> <span class="n">observation</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1"># convert the db data to amplitude units</span>
    <span class="c1"># amplitude = sqrt(power)</span>
    <span class="c1"># then divide post/pre and take the log</span>
    <span class="k">if</span> <span class="n">in_units</span> <span class="o">==</span> <span class="s2">&quot;dB&quot;</span><span class="p">:</span>
        <span class="n">lar</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">geeutils</span><span class="o">.</span><span class="n">db_to_power</span><span class="p">(</span><span class="n">observation</span><span class="p">)</span><span class="o">.</span><span class="n">sqrt</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">band</span><span class="p">)</span>
            <span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">geeutils</span><span class="o">.</span><span class="n">db_to_power</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span><span class="o">.</span><span class="n">sqrt</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">band</span><span class="p">))</span>
            <span class="o">.</span><span class="n">log10</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="k">elif</span> <span class="n">in_units</span> <span class="o">==</span> <span class="s2">&quot;power&quot;</span><span class="p">:</span>
        <span class="n">lar</span> <span class="o">=</span> <span class="n">observation</span><span class="o">.</span><span class="n">sqrt</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">band</span><span class="p">)</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">reference</span><span class="o">.</span><span class="n">sqrt</span><span class="p">()</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">band</span><span class="p">))</span><span class="o">.</span><span class="n">log10</span><span class="p">()</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;input units could not be infered from </span><span class="si">{</span><span class="n">in_units</span><span class="si">}</span><span class="s2">, please select either &#39;dB&#39; or &#39;power&#39;&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">segmentation</span> <span class="o">==</span> <span class="s2">&quot;edgeotsu&quot;</span><span class="p">:</span>
        <span class="n">floods_lar</span> <span class="o">=</span> <span class="n">thresholding</span><span class="o">.</span><span class="n">edge_otsu</span><span class="p">(</span><span class="n">lar</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">segmentation</span> <span class="o">==</span> <span class="s2">&quot;bmaxotsu&quot;</span><span class="p">:</span>
        <span class="n">floods_lar</span> <span class="o">=</span> <span class="n">thresholding</span><span class="o">.</span><span class="n">bmax_otsu</span><span class="p">(</span><span class="n">lar</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">segmentation</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">floods_lar</span> <span class="o">=</span> <span class="n">lar</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;selected segmentation method </span><span class="si">{</span><span class="n">segmentation</span><span class="si">}</span><span class="s2"> is not valid, please select &#39;edgeotsu&#39;, &#39;bmaxotsu&#39;, or None&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">floods_lar</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../fetch/" class="md-footer__link md-footer__link--prev" aria-label="Previous: fetch module" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              fetch module
            </div>
          </div>
        </a>
      
      
        
        <a href="../filtering/" class="md-footer__link md-footer__link--next" aria-label="Next: filtering module" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              filtering module
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.5e67fbfe.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c44cc438.min.js"></script>
      
    
  </body>
</html>